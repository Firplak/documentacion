---
title: main
---

Module `src.main`
=================

Expand source code

    from .lib.constants import CONFIG
    from .lib.facture import getFactureJWT, getFactureInvoices, getFactureInvoiceDetails
    from .lib.mail import sendMail
    from .lib.utils import registerProcessed, getProcessed, getUrlAsBlob
    
    RECIPIENT = CONFIG["Email"]["RECIPIENT"]
    
    
    def main():
        JWT = getFactureJWT()
        invoices = getFactureInvoices(JWT)
        invoiceDetails = []
        for invoice in invoices:
            invoiceDetails.append(getFactureInvoiceDetails(
                JWT, invoice["ldf"].strip()))
        for invoice in invoiceDetails:
            if invoice:
                if not invoice["LDF"] in getProcessed():
                    sendMail(
                        RECIPIENT,
                        invoice["LDF"],
                        f"Se recibio la factura {invoice['LDF']}",
                        [
                            {
                                "name": invoice["LDF"] + ".xml",
                                "data": getUrlAsBlob(invoice["UBL"]),
                            },
                            {
                                "name": invoice["LDF"] + ".pdf",
                                "data": getUrlAsBlob(invoice["URI"]),
                            },
                        ],
                    )
                    registerProcessed(invoice["LDF"])
    
    
    if (__name__ == "__main__"):
        main()

Functions
---------

`def main()`

Expand source code

    def main():
        JWT = getFactureJWT()
        invoices = getFactureInvoices(JWT)
        invoiceDetails = []
        for invoice in invoices:
            invoiceDetails.append(getFactureInvoiceDetails(
                JWT, invoice["ldf"].strip()))
        for invoice in invoiceDetails:
            if invoice:
                if not invoice["LDF"] in getProcessed():
                    sendMail(
                        RECIPIENT,
                        invoice["LDF"],
                        f"Se recibio la factura {invoice['LDF']}",
                        [
                            {
                                "name": invoice["LDF"] + ".xml",
                                "data": getUrlAsBlob(invoice["UBL"]),
                            },
                            {
                                "name": invoice["LDF"] + ".pdf",
                                "data": getUrlAsBlob(invoice["URI"]),
                            },
                        ],
                    )
                    registerProcessed(invoice["LDF"])

Index
=====

*   ### Super-module
    
    *   [src](. "src")
*   ### [Functions](#header-functions)
    
    *   [main](#src.main.main "src.main.main")

Generated by [pdoc 0.10.0](https://pdoc3.github.io/pdoc "pdoc: Python API documentation generator").