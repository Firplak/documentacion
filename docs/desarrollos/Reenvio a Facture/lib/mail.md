---
title: mail
---

Module `src.lib.mail`
=====================

Expand source code

    import smtplib
    from email.mime.application import MIMEApplication
    from email.mime.multipart import MIMEMultipart
    from email.mime.text import MIMEText
    from email.utils import formatdate
    from .constants import CONFIG
    
    CREDENTIALS = {
        "EMAIL": CONFIG["Email"]["EMAIL"],
        "PASSWORD": CONFIG["Email"]["PASSWORD"],
    }
    """str: The credentials needed to send the email"""
    
    
    def sendMail(send_to: str, subject: str, text: str, files: list = None) -> None:
        """
        Sends an email with the given parameters
    
        Args:
            send_to (str): The recipient of the email
            subject (str): The subject of the email
            text (str): The body of the email
            files (list, optional): All the files that will go attached with the email. Defaults to None.
        """
    
        msg = MIMEMultipart()
        msg["From"] = CREDENTIALS["EMAIL"]
        msg["To"] = send_to
        msg["Date"] = formatdate(localtime=True)
        msg["Subject"] = subject
    
        msg.attach(MIMEText(text))
    
        for f in files or []:
            part = MIMEApplication(
                f["data"],
                Name=f["name"],
            )
            # After the file is closed
            part["Content-Disposition"] = 'attachment; filename="%s"' % f["name"]
            msg.attach(part)
    
        mailserver = smtplib.SMTP("smtp.office365.com", 587)
        mailserver.ehlo()
        mailserver.starttls()
        mailserver.login(CREDENTIALS["EMAIL"], CREDENTIALS["PASSWORD"])
        mailserver.sendmail(CREDENTIALS["EMAIL"], send_to, msg.as_string())
        mailserver.close()

Global variables
----------------

`var CREDENTIALS`

str: The credentials needed to send the email

Functions
---------

`def sendMail(send_to: str, subject: str, text: str, files: list = None) ‑> None`

Sends an email with the given parameters

Args
----

**`send_to`** : `str`

The recipient of the email

**`subject`** : `str`

The subject of the email

**`text`** : `str`

The body of the email

**`files`** : `list`, optional

All the files that will go attached with the email. Defaults to None.

Expand source code

    def sendMail(send_to: str, subject: str, text: str, files: list = None) -> None:
        """
        Sends an email with the given parameters
    
        Args:
            send_to (str): The recipient of the email
            subject (str): The subject of the email
            text (str): The body of the email
            files (list, optional): All the files that will go attached with the email. Defaults to None.
        """
    
        msg = MIMEMultipart()
        msg["From"] = CREDENTIALS["EMAIL"]
        msg["To"] = send_to
        msg["Date"] = formatdate(localtime=True)
        msg["Subject"] = subject
    
        msg.attach(MIMEText(text))
    
        for f in files or []:
            part = MIMEApplication(
                f["data"],
                Name=f["name"],
            )
            # After the file is closed
            part["Content-Disposition"] = 'attachment; filename="%s"' % f["name"]
            msg.attach(part)
    
        mailserver = smtplib.SMTP("smtp.office365.com", 587)
        mailserver.ehlo()
        mailserver.starttls()
        mailserver.login(CREDENTIALS["EMAIL"], CREDENTIALS["PASSWORD"])
        mailserver.sendmail(CREDENTIALS["EMAIL"], send_to, msg.as_string())
        mailserver.close()

Index
=====

*   ### Super-module
    
    *   [src.lib](. "src.lib")
*   ### [Global variables](#header-variables)
    
    *   [CREDENTIALS](#src.lib.mail.CREDENTIALS "src.lib.mail.CREDENTIALS")
*   ### [Functions](#header-functions)
    
    *   [sendMail](#src.lib.mail.sendMail "src.lib.mail.sendMail")

Generated by [pdoc 0.10.0](https://pdoc3.github.io/pdoc "pdoc: Python API documentation generator").